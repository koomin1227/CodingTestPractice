from itertools import combinations
input = """............
........0...
.....0......
.......0....
....0.......
......A.....
............
............
........A...
.........A..
............
............"""

input = """..................................................
.......................x.................N........
..................x...............................
............x................w.........D.....a....
.........6...........i.........D..............u...
........6.......................q................u
........................i....u.w...........a.2....
....................................u.12..........
..................................f.....D....0a...
.............................Q..D......c..N..f....
..............w..................................f
.........Y.............i...............q..a.......
............................2..........O...q......
.....6..G.....................R...................
..............................N...................
.U.......G................i...J.............0.....
Y..U................F......N......................
.T......Y.............H.................2.P.......
...............T.........F.8........H.............
..T...............F...............l..............0
................G.....e........18...Q.............
.......................F....................O.....
.....Y....U...................l....g..............
U........9........................................
.....................e..q..Q......................
.......X........e......................1Q..O......
............T.................gx......0..........t
...................l......9........P..............
.y...........9...............r.5.......j.P........
..z.........d.........g......................H....
................6.......r...........P.........O...
.A........................8...r...................
.4....W...Z...........9..................s..j.....
.z..W.........y...........og......................
..3.z.....R.....L....o.........................H..
.......yZ.c..W.......p..............s.............
............1..3.........L.........S..............
.......Z..4............o.....S...........5.......s
............c........l......7.....................
.....4....p.........I.......t...........5........j
.......c....h...........C..d......................
......n..........C......L............E....j.......
.X.W..........n....R......d.I...............5.....
3.........Cn.........L...r.............e..........
...A...........Z.p.....I..S.............s.......J.
....................7.............S...X....J......
........X.............o...........................
........A....h.R.....7.t...I......................
..A.4z......y.p..h.7...........Et.................
................h........3..E..d.8................"""

antenna_map = []
antenna_location = {}
answer = 0
for row in input.split('\n'):
    antenna_map.append(list(row))

for i in range(len(antenna_map)):
    for j in range(len(antenna_map[0])):
        if antenna_map[i][j] != '.':
            if antenna_map[i][j] not in antenna_location:
                antenna_location[antenna_map[i][j]] = []
            antenna_location[antenna_map[i][j]].append((i,j))

for frequency in antenna_location:
    antenna_pairs = combinations(antenna_location[frequency], 2)
    for antenna_pair in antenna_pairs:
        a, b = antenna_pair
        anti_a = [a[0] + (a[0] - b[0]), a[1] + (a[1] - b[1])]
        anti_b = [b[0] + (b[0] - a[0]), b[1] + (b[1] - a[1])]
        if anti_a[0] >= 0 and anti_a[0] < len(antenna_map) and anti_a[1] >= 0 and anti_a[1] < len(antenna_map[0]):
            if antenna_map[anti_a[0]][anti_a[1]] != '#':
                antenna_map[anti_a[0]][anti_a[1]] = '#'
                answer += 1
        if anti_b[0] >= 0 and anti_b[0] < len(antenna_map) and anti_b[1] >= 0 and anti_b[1] < len(antenna_map[0]):
            if antenna_map[anti_b[0]][anti_b[1]] != '#':
                antenna_map[anti_b[0]][anti_b[1]] = '#'
                answer += 1

print(answer)
        